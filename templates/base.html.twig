<!DOCTYPE html>
<html lang="{{ app.request.locale }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>{% block title %}Pathfinder Character Manager - {% block subtitle "Home" %}{% endblock %}</title>
    {% block stylesheets %}
        {{ encore_entry_link_tags('app') }}
    {% endblock %}
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="{{ path('index') }}">
        Pathfinder Character Manager
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        {% set route = app.request.attributes.get('_route') %}
        {% set routeParams = app.request.attributes.get('_route_params') %}
        {% if route in ['characters_show', 'character_inventory', 'character_inventory_edit', 'character_spells'] %}
            <ul class="navbar-nav mr-auto">
                <li class="nav-item{% if route == 'characters_show' %} active{% endif %}">
                    <a class="nav-link" href="{{ path('characters_show', routeParams) }}">{{ 'main.profile'|trans }}</a>
                </li>
                <li class="nav-item{% if route in ['character_inventory', 'character_inventory_edit'] %} active{% endif %}">
                    <a class="nav-link"
                       href="{{ path('character_inventory', routeParams) }}">{{ 'inventory'|trans }}</a>
                </li>
                <li class="nav-item{% if route == 'character_spells' %} active{% endif %}">
                    <a class="nav-link" href="{{ path('character_spells', routeParams) }}">{{ 'spells'|trans }}</a>
                </li>
            </ul>
        {% else %}
            <div class="navbar-nav mr-auto"></div>
        {% endif %}
        <ul class="navbar-nav">
            <li class="nav-item dropdown">
                <a class="bg-light nav-link dropdown-toggle" href="#" id="tables-dropdown" data-toggle="dropdown"
                   aria-haspopup="true" aria-expanded="false">
                    {% trans %}tables{% endtrans %}
                </a>
                <div class="dropdown-menu" aria-labelledby="tables-dropdown">
                    <a class="dropdown-item" href="{{ path('races') }}">{{ 'races'|trans }}</a>
                    <a class="dropdown-item" href="{{ path('classes') }}">{% trans %}classes{% endtrans %}</a>
                    <a class="dropdown-item" href="{{ path('skills') }}">{% trans %}skills{% endtrans %}</a>
                    <a class="dropdown-item" href="{{ path('feats') }}">{% trans %}feats{% endtrans %}</a>
                    <a class="dropdown-item" href="{{ path('spells') }}">{% trans %}spells{% endtrans %}</a>
                    <a class="dropdown-item"
                       href="{{ path('character_advancement') }}">{% trans %}advancement{% endtrans %}</a>
                    <a class="dropdown-item" href="{{ path('list_items') }}">{% trans %}items{% endtrans %}</a>
                    <a class="dropdown-item" href="{{ path('conditions') }}">{% trans %}conditions{% endtrans %}</a>
                </div>
            </li>
            {% if app.user and is_granted("IS_AUTHENTICATED_REMEMBERED") %}
                <li class="nav-item dropdown">
                    <a class="bg-light nav-link dropdown-toggle" href="#" id="profile-dropdown" data-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false">
                        {{ app.user.username }}
                    </a>
                    <div class="dropdown-menu" aria-labelledby="dropdown-profile">
                        <a class="dropdown-item" href="">Profile</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="{{ path('app_logout') }}">Logout</a>
                    </div>
                </li>
            {% else %}
                <li class="nav-item dropdown">
                    <a href="#" class="bg-light nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"
                       aria-expanded="false" id="login-dropdown">
                        Login
                    </a>
                    <ul class="dropdown-menu dropdown-menu-right mt-2" aria-labelledby="login-dropdown"
                        style="width: 15rem">
                        <li class="px-3 py-2">
                            <form class="form" role="form" method="post" action="{{ path('app_login') }}">
                                <div class="form-group">
                                    <label class="sr-only" for="inputEmail">{{ 'email'|trans }}</label>
                                    <input id="inputEmail" placeholder="{{ 'email'|trans }}"
                                           class="form-control form-control-sm" type="text" required="" name="email">
                                </div>
                                <div class="form-group">
                                    <label class="sr-only" for="inputPassword">{{ 'password'|trans }}</label>
                                    <input id="inputPassword" placeholder="{{ 'password'|trans }}"
                                           class="form-control form-control-sm" type="password" required="" name="password">
                                </div>
                                <div class="form-group form-check">
                                    <input type="checkbox" name="_remember_me" class="custom-control-input"
                                           id="remember_me">
                                    <label class="custom-control-label" for="remember_me">
                                        {{ 'remember_me'|trans }}
                                    </label>
                                </div>
                                <div class="form-group">
                                    <button type="submit" class="btn btn-primary btn-block">{{ 'login'|trans }}</button>
                                </div>
                                <div class="form-group text-center">
                                    <small>
                                        <a href="{{ path('app_reset_password') }}">{{ 'forgot_password'|trans }}</a>
                                    </small>
                                </div>
                                <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">
                            </form>
                        </li>
                    </ul>
                </li>
                <li class="nav-item"><a class="nav-link" href="{{ path('app_register') }}">Register</a></li>
            {% endif %}
            <li class="nav-item dropdown">
                <a class="bg-light nav-link dropdown-toggle" href="#" id="lang-dropdown" data-toggle="dropdown"
                   aria-haspopup="true" aria-expanded="false">
                    {% trans %}languages{% endtrans %}
                </a>
                <div class="dropdown-menu" aria-labelledby="lang-dropdown">
                    <a class="dropdown-item"
                       href="{{ path(app.request.attributes.get('_route'), app.request.attributes.get('_route_params')|merge({'_locale': 'en'})) }}">
                        {% trans %}english{% endtrans %}
                    </a>
                    <a class="dropdown-item"
                       href="{{ path(app.request.attributes.get('_route'), app.request.attributes.get('_route_params')|merge({'_locale': 'fr'})) }}">
                        {% trans %}french{% endtrans %}
                    </a>
                </div>
            </li>
        </ul>
    </div>
</nav>
<main class="container">
    {% for label, messages in app.flashes %}
        {% for message in messages %}
            <div class="alert alert-{{ label }}" role="alert">{{ message }}</div>
        {% endfor %}
    {% endfor %}

    {% block body %}{% endblock %}
</main>
{% block javascripts %}
    {{ encore_entry_script_tags('app') }}
{% endblock %}
</body>
</html>
