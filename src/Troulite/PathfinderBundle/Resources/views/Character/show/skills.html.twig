<h2>{{ 'skills'|trans }}</h2>
<table class="table table-hover table-striped table-condensed table-responsive">
    <thead>
    <tr>
        <th><a href="{{ path('skills') }}">{{ 'skill'|trans }}</a></th>
        <th>{{ 'total.bonus'|trans }}</th>
        <th>{{ 'ability.modifier'|trans }}</th>
        <th>{{ 'ranks'|trans }}</th>
        <th>{{ 'misc.modifiers'|trans }}</th>
    </tr>
    </thead>
    <tbody>
    {% for skill in skills if (skill.untrained or entity.skillRank(skill) > 0) %}
        {% set value = 0 %}
        {% set bonus = 0 %}
        {%- set shortname = skill.shortname -%}
        {%- spaceless -%}
            {% set value = entity.modifierByAbility(skill.keyAbility, entity) + entity.skillRank(skill) %}
            {% if entity.hasClassBonus(skill) and entity.skillRank(skill) > 0 %}
                {% set value = value + 3 %}
            {% endif %}
            {% if attribute(entity.skillsBonuses, shortname) is defined %}
                {% set bonus = attribute(entity.skillsBonuses, shortname).bonus %}
                {% set value = value + bonus %}
            {% endif %}
        {%- endspaceless -%}
        <tr>
            <td>
                {% if entity.hasClassBonus(skill) -%}
                    <span class="glyphicon glyphicon-check"></span>
                {% else %}
                    <span class="glyphicon glyphicon-unchecked"></span>
                {% endif %}
                {{ skill }}
            </td>
            <td>{{ value }}</td>
            <td>{{ skill.keyAbility }} {{ entity.modifierByAbility(skill.keyAbility, entity) }}</td>
            <td>{{ entity.skillRank(skill) }}</td>
            <td>
                {{ bonus|default(0) }}
                {% if attribute(entity.skillsBonuses, shortname) is defined %}
                    {{ popovers.bonuses(entity.skillsBonuses[shortname]) }}
                {% endif %}
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>